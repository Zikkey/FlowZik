@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --bg-primary: 255 255 255;
    --bg-secondary: 248 249 250;
    --bg-tertiary: 241 243 245;
    --bg-elevated: 255 255 255;
    --text-primary: 17 24 39;
    --text-secondary: 107 114 128;
    --text-tertiary: 156 163 175;
    --accent: 99 102 241;
    --accent-hover: 79 70 229;
    --accent-subtle: 238 242 255;
    --border-color: 229 231 235;
    --border-hover: 209 213 219;
  }

  .dark {
    --bg-primary: 17 17 21;
    --bg-secondary: 24 24 30;
    --bg-tertiary: 32 33 40;
    --bg-elevated: 39 40 48;
    --text-primary: 243 244 246;
    --text-secondary: 156 163 175;
    --text-tertiary: 107 114 128;
    --accent: 129 140 248;
    --accent-hover: 165 180 252;
    --accent-subtle: 30 27 75;
    --border-color: 55 56 66;
    --border-hover: 75 76 88;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html, body, #root {
    height: 100%;
    width: 100%;
    overflow: hidden;
  }

  body {
    font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
    background-color: rgb(var(--bg-primary));
    color: rgb(var(--text-primary));
    transition: background-color 0.2s ease, color 0.2s ease;
    -webkit-font-smoothing: antialiased;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  ::-webkit-scrollbar-thumb {
    background: rgb(var(--border-color));
    border-radius: 3px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: rgb(var(--border-hover));
  }

  /* Drag region for titlebar */
  .drag-region {
    -webkit-app-region: drag;
  }
  .no-drag {
    -webkit-app-region: no-drag;
  }
}

@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
  }
}

/* Board horizontal scrollbar - more visible */
.board-scroll::-webkit-scrollbar {
  height: 10px;
}
.board-scroll::-webkit-scrollbar-track {
  background: rgb(var(--bg-secondary));
  border-radius: 5px;
}
.board-scroll::-webkit-scrollbar-thumb {
  background: rgb(var(--border-hover));
  border-radius: 5px;
}
.board-scroll::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--text-tertiary));
}

/* Markdown body styles */
.markdown-body h1 {
  font-size: 1.25rem;
  font-weight: 700;
  margin: 0.5em 0 0.25em;
  color: rgb(var(--text-primary));
}
.markdown-body h2 {
  font-size: 1.1rem;
  font-weight: 600;
  margin: 0.5em 0 0.25em;
  color: rgb(var(--text-primary));
}
.markdown-body h3 {
  font-size: 1rem;
  font-weight: 600;
  margin: 0.4em 0 0.2em;
  color: rgb(var(--text-primary));
}
.markdown-body p {
  margin: 0.3em 0;
  line-height: 1.6;
}
.markdown-body strong {
  font-weight: 600;
}
.markdown-body em {
  font-style: italic;
}
.markdown-body code {
  background: rgb(var(--bg-tertiary));
  padding: 0.1em 0.35em;
  border-radius: 3px;
  font-size: 0.85em;
  font-family: 'Consolas', 'Monaco', monospace;
}
.markdown-body pre {
  background: rgb(var(--bg-tertiary));
  border: 1px solid rgb(var(--border-color));
  border-radius: 6px;
  padding: 0.6em 0.8em;
  margin: 0.4em 0;
  overflow-x: auto;
}
.markdown-body pre code {
  background: none;
  padding: 0;
  font-size: 0.8em;
  line-height: 1.5;
}
.markdown-body blockquote {
  border-left: 3px solid rgb(var(--accent));
  padding-left: 0.75em;
  margin: 0.4em 0;
  color: rgb(var(--text-secondary));
}
.markdown-body ul {
  list-style: disc;
  padding-left: 1.5em;
  margin: 0.3em 0;
}
.markdown-body li {
  margin: 0.15em 0;
  line-height: 1.5;
}
.markdown-body a {
  color: rgb(var(--accent));
  text-decoration: none;
}
.markdown-body a:hover {
  text-decoration: underline;
}

/* Board background patterns */
.bg-board-dots {
  background-image: radial-gradient(circle, rgb(var(--border-color) / 0.3) 1px, transparent 1px);
  background-size: 20px 20px;
}
.bg-board-grid {
  background-image:
    linear-gradient(rgb(var(--border-color) / 0.15) 1px, transparent 1px),
    linear-gradient(90deg, rgb(var(--border-color) / 0.15) 1px, transparent 1px);
  background-size: 24px 24px;
}
.bg-board-lines {
  background-image: linear-gradient(rgb(var(--border-color) / 0.1) 1px, transparent 1px);
  background-size: 100% 28px;
}
.bg-board-crosshatch {
  background-image:
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 9px,
      rgb(var(--border-color) / 0.08) 9px,
      rgb(var(--border-color) / 0.08) 10px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 9px,
      rgb(var(--border-color) / 0.08) 9px,
      rgb(var(--border-color) / 0.08) 10px
    );
}
.bg-board-diamonds {
  background-image:
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 19px,
      rgb(var(--border-color) / 0.12) 19px,
      rgb(var(--border-color) / 0.12) 20px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 19px,
      rgb(var(--border-color) / 0.12) 19px,
      rgb(var(--border-color) / 0.12) 20px
    );
}
.bg-board-zigzag {
  background-image:
    linear-gradient(135deg, rgb(var(--border-color) / 0.12) 25%, transparent 25%),
    linear-gradient(225deg, rgb(var(--border-color) / 0.12) 25%, transparent 25%);
  background-size: 20px 40px;
  background-position: 0 0, 10px 0;
}

/* Animated board backgrounds */
@keyframes board-float {
  0%, 100% { background-position: 0 0; }
  50% { background-position: 20px 20px; }
}
@keyframes board-drift {
  from { background-position: 0 0, 0 0; }
  to { background-position: 40px 40px, -40px -40px; }
}
@keyframes board-pulse-dots {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.6; }
}
@keyframes board-wave {
  from { background-position: 0 0; }
  to { background-position: 60px 0; }
}

.bg-board-anim-dots {
  background-image: radial-gradient(circle, rgb(var(--accent) / 0.15) 1px, transparent 1px);
  background-size: 24px 24px;
  animation: board-float 8s ease-in-out infinite;
}
.bg-board-anim-grid {
  background-image:
    linear-gradient(rgb(var(--accent) / 0.08) 1px, transparent 1px),
    linear-gradient(90deg, rgb(var(--accent) / 0.08) 1px, transparent 1px);
  background-size: 30px 30px;
  animation: board-float 12s ease-in-out infinite;
}
.bg-board-anim-diamonds {
  background-image:
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 19px,
      rgb(var(--accent) / 0.07) 19px,
      rgb(var(--accent) / 0.07) 20px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 19px,
      rgb(var(--accent) / 0.07) 19px,
      rgb(var(--accent) / 0.07) 20px
    );
  animation: board-drift 20s linear infinite;
}
.bg-board-anim-waves {
  background-image:
    repeating-linear-gradient(
      90deg,
      transparent,
      transparent 29px,
      rgb(var(--accent) / 0.06) 29px,
      rgb(var(--accent) / 0.06) 30px
    );
  animation: board-wave 4s linear infinite;
}

/* ── Glass mode ─────────────────────────────────── */

/* Sidebar — frosted glass panel */
.glass-mode [data-tutorial="sidebar"] {
  background-color: rgb(var(--bg-secondary) / 0.4) !important;
  backdrop-filter: blur(24px) saturate(1.6) !important;
  -webkit-backdrop-filter: blur(24px) saturate(1.6) !important;
  border-right-color: rgb(255 255 255 / 0.08) !important;
}

/* Columns — frosted containers */
.glass-mode [data-column] {
  background-color: rgb(var(--bg-secondary) / 0.35) !important;
  backdrop-filter: blur(20px) saturate(1.5) !important;
  -webkit-backdrop-filter: blur(20px) saturate(1.5) !important;
  border: 1px solid rgb(255 255 255 / 0.08) !important;
  box-shadow: 0 4px 24px rgb(0 0 0 / 0.08), inset 0 1px 0 rgb(255 255 255 / 0.06) !important;
}

/* Cards — frosted card surfaces */
.glass-mode [data-card] {
  background-color: rgb(var(--bg-elevated) / 0.35) !important;
  backdrop-filter: blur(16px) saturate(1.4) !important;
  -webkit-backdrop-filter: blur(16px) saturate(1.4) !important;
  border-color: rgb(255 255 255 / 0.1) !important;
  box-shadow: 0 2px 12px rgb(0 0 0 / 0.06), inset 0 1px 0 rgb(255 255 255 / 0.08) !important;
}
.glass-mode [data-card]:hover {
  background-color: rgb(var(--bg-elevated) / 0.45) !important;
  border-color: rgb(255 255 255 / 0.18) !important;
  box-shadow: 0 4px 20px rgb(0 0 0 / 0.1), inset 0 1px 0 rgb(255 255 255 / 0.1) !important;
}

/* Elevated surfaces (modals, panels, dropdowns) */
.glass-mode .bg-surface-elevated {
  background-color: rgb(var(--bg-elevated) / 0.5) !important;
  backdrop-filter: blur(24px) saturate(1.5);
  -webkit-backdrop-filter: blur(24px) saturate(1.5);
}

/* Secondary surfaces (fallback for elements without data attrs) */
.glass-mode .bg-surface-secondary {
  background-color: rgb(var(--bg-secondary) / 0.45) !important;
  backdrop-filter: blur(16px) saturate(1.4);
  -webkit-backdrop-filter: blur(16px) saturate(1.4);
}

/* Tertiary surfaces */
.glass-mode .bg-surface-tertiary {
  background-color: rgb(var(--bg-tertiary) / 0.35) !important;
}
